<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Accès — Clé secrète</title>
  <style>
    :root{ --bg-1: linear-gradient(135deg,#6a11cb 0%, #2575fc 100%); --accent:#ffd369; --accent-dark:#ffb84d; --card-text:#eef2ff; --muted:rgba(238,242,255,0.75); --radius:14px; --shadow:0 8px 30px rgba(2,6,23,0.45); font-family:Inter,Arial;}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:var(--bg-1);color:var(--card-text);-webkit-font-smoothing:antialiased}
    .container{min-height:100vh; display:flex; align-items:center; justify-content:center; padding:32px;}
    .card{width:100%; max-width:420px; background:linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02)); border-radius:var(--radius); padding:28px; box-shadow:var(--shadow); border:1px solid rgba(255,255,255,0.06); backdrop-filter: blur(6px);}
    .logo{display:flex; align-items:center; gap:12px; margin-bottom:8px; justify-content:space-between;}
    .mark{width:48px; height:48px; border-radius:10px; background:linear-gradient(135deg,var(--accent),#ff7a7a); display:flex; align-items:center; justify-content:center; font-weight:700; color:#0f1724; font-size:18px; box-shadow: 0 6px 18px rgba(0,0,0,0.25);}
    h1{margin:0;font-size:20px;color:var(--card-text)}
    .lead{margin:6px 0 18px;color:var(--muted); font-size:14px}
    .field{margin-bottom:12px}
    label{display:block;font-size:13px;color:var(--muted); margin-bottom:6px}
    .input-row{display:flex; gap:8px; align-items:center}
    .input {width:100%; padding:12px 14px; border-radius:10px; border:1px solid rgba(255,255,255,0.06); background: rgba(10,14,30,0.2); color:var(--card-text); font-size:14px; outline:none}
    .row-between{display:flex; justify-content:space-between; align-items:center}
    .btn{display:inline-flex; align-items:center; justify-content:center; gap:8px; padding:10px 14px; border-radius:10px; border:none; cursor:pointer; font-weight:600; background: linear-gradient(90deg,#7f5af0,#6a11cb); color:white;}
    .btn.secondary{background:transparent; border:1px solid rgba(255,255,255,0.06); color:var(--card-text)}
    .message{margin-top:10px; padding:10px 12px; border-radius:8px; font-size:13px}
    .error{ background: rgba(255,107,107,0.12); color:#ff6b6b; border:1px solid rgba(255,107,107,0.12) }
    .success{ background: rgba(46,204,113,0.08); color:#2ecc71; border:1px solid rgba(46,204,113,0.06) }
    .info-btn{width:48px; height:48px; border-radius:50%; display:inline-flex; align-items:center; justify-content:center; border:2px solid rgba(0,0,0,0.12); background: linear-gradient(180deg,var(--accent),var(--accent-dark)); color:#0f1724; cursor:pointer; font-weight:800;}
    .info-btn.pulse{ animation: pulse 2.2s infinite;}
    @keyframes pulse {0%{box-shadow:0 10px 30px rgba(255,183,77,0.12)}50%{box-shadow:0 20px 40px rgba(255,183,77,0.18)}100%{box-shadow:0 10px 30px rgba(255,183,77,0.12)}}
    .tooltip{margin-top:8px; font-size:13px; color:var(--muted); background: rgba(0,0,0,0.28); padding:8px 10px; border-radius:8px; display:none;}
  </style>
</head>
<body>
  <div class="container">
    <div class="card" role="main" aria-labelledby="title">
      <div class="logo">
        <div style="display:flex;align-items:center;gap:12px">
          <div class="mark">CL</div>
          <div>
            <h1 id="title">Accès à la classe</h1>
            <div class="lead">Rentre la clé de sécurité pour continuer.</div>
          </div>
        </div>
        <div>
          <button class="info-btn pulse" id="indexInfo" title="Info">i</button>
        </div>
      </div>

      <div class="field">
        <label for="key">Clé de sécurité</label>
        <div class="input-row">
          <input id="key" class="input" type="password" placeholder="Entrez la clé" autocomplete="off">
        </div>
      </div>

      <div class="row-between" style="margin-top:8px">
        <button class="btn" id="validateBtn">Valider</button>
        <button class="btn secondary" id="resetBtn">Effacer</button>
      </div>

      <div id="msg" class="message" style="display:none"></div>
      <div id="indexTooltip" class="tooltip" style="margin-top:12px">Veuillez entrer la clé de sécurité que Kenzo.S vous a donnée.</div>
    </div>
  </div>

  <script>
    (function(){
      // SHA256 hex du mot de passe d'origine "xvii1xwyax"
      const correctHash = "aa4b3fe6fae6049455d2e349bf2bc9aaf339364e5708acc1a12e950f16c7fdb6";
      const keyInput = document.getElementById('key');
      const msg = document.getElementById('msg');
      const validateBtn = document.getElementById('validateBtn');
      const resetBtn = document.getElementById('resetBtn');
      const infoBtn = document.getElementById('indexInfo');
      const tooltip = document.getElementById('indexTooltip');

      function showMessage(text,type){
        msg.style.display='block';
        msg.className = 'message ' + (type === 'error'? 'error' : 'success');
        msg.innerText = text;
      }

      async function sha256hex(str){
        const data = new TextEncoder().encode(str);
        const hashBuf = await crypto.subtle.digest('SHA-256', data);
        const hashArray = Array.from(new Uint8Array(hashBuf));
        return hashArray.map(b => b.toString(16).padStart(2,'0')).join('');
      }

      validateBtn.addEventListener('click', async ()=>{
        const val = (keyInput.value||"").trim();
        if(!val){ showMessage("Entrez la clé pour continuer.", "error"); return; }
        try{
          const h = await sha256hex(val);
          if(h === correctHash){
            showMessage("Clé acceptée — redirection…", "success");
            setTimeout(()=> location.href = 'login.html', 450);
          } else {
            showMessage("Clé incorrecte. Vérifie et réessaie.", "error");
          }
        }catch(e){
          showMessage("Erreur interne. Réessaie.", "error");
        }
      });

      resetBtn.addEventListener('click', ()=>{ keyInput.value = ""; msg.style.display = 'none'; });
      keyInput.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') validateBtn.click(); });
      infoBtn.addEventListener('click', ()=>{ tooltip.style.display = tooltip.style.display === 'block' ? 'none' : 'block'; });
    })();
  </script>
</body>
</html>
